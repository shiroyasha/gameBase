// Generated by CoffeeScript 1.6.3
(function() {
  define(function(require, exports, module) {
    var App, Asteroids, Background, Glow, InputHandler, Physics, Planets, Player, RenderQueue, Stars, model;
    RenderQueue = require('RenderQueue');
    Background = require('Background');
    Stars = require('Stars');
    Asteroids = require('Asteroids');
    Planets = require('Planets');
    InputHandler = require('InputHandler');
    Player = require('Player');
    Glow = require('Glow');
    model = require('Model');
    Physics = require('physics/modelUpdater');
    App = (function() {
      function App(c) {
        this.c = c;
        this.model = model;
        InputHandler(this.model);
        this.queue = new RenderQueue();
        this.queue.add(new Background(model));
        this.queue.add(new Stars(model));
        this.queue.add(new Planets(model));
        this.queue.add(new Asteroids(model));
        this.queue.add(new Player(model));
        this.queue.add(new Glow(model));
        this.lastTime = null;
        requestAnimationFrame(this._loop.bind(this));
      }

      App.prototype.update = function(dt) {
        Physics.updateModel(model, dt / 100);
        return this.queue.update(dt);
      };

      App.prototype.render = function(c) {
        return this.queue.render(c);
      };

      App.prototype._loop = function(time) {
        var dt;
        if (this.lastTime === null) {
          this.lastTime = time;
        }
        dt = time - this.lastTime;
        this.update(dt);
        this.render(this.c);
        this.lastTime = time;
        return requestAnimationFrame(this._loop.bind(this));
      };

      return App;

    })();
    return App;
  });

}).call(this);
